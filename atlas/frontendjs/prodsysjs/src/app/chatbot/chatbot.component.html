<button class="mat-primary" (click)="connect()">Connect</button>

<div *ngIf="connected">Connected</div>
<div *ngIf="!connected">Disconnected</div>

<!--div to display messages-->
<!--<div class="grid grid-cols-1 border-2 border-amber-200">-->
<!--    <div *ngFor="let message of receivedMessages" >-->
<!--        {{message.text}}-->
<!--    </div>-->
<!--</div>-->


<!--<div class="min-h-screen bg-indigo-50 flex flex-col items-center justify-center">-->
<!--  &lt;!&ndash; chat box &ndash;&gt;-->

<!--  <div class="w-180 h-96 flex flex-col border shadow-md bg-white">-->
<!--    <div class="flex items-center justify-between border-b p-2">-->
<!--      &lt;!&ndash; user info &ndash;&gt;-->
<!--      <div class="flex items-center">-->
<!--        <img class="rounded-full w-10 h-10" src="/static/images/panda-avatar.png" />-->
<!--        <div class="pl-2">-->
<!--          <div class="font-semibold">-->
<!--            <a class="hover:underline" href="#">ATLAS Prodsys Chat</a>-->
<!--          </div>-->
<!--          <div class="text-xs text-gray-600">{{connected}}</div>-->
<!--        </div>-->
<!--      </div>-->
<!--      &lt;!&ndash; end user info &ndash;&gt;-->
<!--      &lt;!&ndash; chat box action &ndash;&gt;-->
<!--      <div>-->
<!--        <a class="inline-flex hover:bg-indigo-50 rounded-full p-2" href="#">-->
<!--          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">-->
<!--            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />-->
<!--          </svg>-->
<!--        </a>-->

<!--        <button class="inline-flex hover:bg-indigo-50 rounded-full p-2" type="button">-->
<!--          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">-->
<!--            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />-->
<!--          </svg>-->
<!--        </button>-->
<!--      </div>-->
<!--      &lt;!&ndash; end chat box action &ndash;&gt;-->
<!--    </div>-->

<!--    <div class="flex-1 px-4 py-4 overflow-y-auto" >-->
<!--      &lt;!&ndash; chat message &ndash;&gt;-->
<!--<ng-container *ngFor="let message of receivedMessages">-->
<!--      <div *ngIf="message.reply" class="flex items-center mb-4">-->
<!--        <div class="flex-none flex flex-col items-center space-y-1 mr-4">-->
<!--          <img class="rounded-full w-10 h-10" src="https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" />-->
<!--          <a href="#" class="block text-xs hover:underline">{{message.user}}</a>-->
<!--        </div>-->
<!--        <div class="flex-1 bg-indigo-400 text-white p-2 rounded-lg mb-2 relative">-->
<!--          <div>{{message.text}}</div>-->

<!--          &lt;!&ndash; arrow &ndash;&gt;-->
<!--          <div class="absolute left-0 top-1/2 transform -translate-x-1/2 rotate-45 w-2 h-2 bg-indigo-400"></div>-->
<!--          &lt;!&ndash; end arrow &ndash;&gt;-->
<!--        </div>-->
<!--      </div>-->

<!--      &lt;!&ndash; end chat message &ndash;&gt;-->

<!--      &lt;!&ndash; chat message &ndash;&gt;-->

<!--      <div *ngIf="!message.reply" class="flex items-center flex-row-reverse mb-4">-->
<!--        <div class="flex-none flex flex-col items-center space-y-1 ml-4">-->
<!--          <img class="rounded-full w-10 h-10" src="/static/images/panda-avatar.png" />-->
<!--        </div>-->
<!--        <div class="flex-1 bg-indigo-100 text-gray-800 p-2 rounded-lg mb-2 relative">-->
<!--          <div>{{message.text}}</div>-->

<!--          &lt;!&ndash; arrow &ndash;&gt;-->
<!--          <div class="absolute right-0 top-1/2 transform translate-x-1/2 rotate-45 w-2 h-2 bg-indigo-100"></div>-->
<!--          &lt;!&ndash; end arrow &ndash;&gt;-->
<!--        </div>-->
<!--      </div>-->

<!--      &lt;!&ndash; end chat message &ndash;&gt;-->
<!--</ng-container>-->

<!--    </div>-->

<!--    <div class="flex items-center border-t p-2">-->
<!--      &lt;!&ndash; chat input action &ndash;&gt;-->
<!--      <div>-->
<!--        <button class="inline-flex hover:bg-indigo-50 rounded-full p-2" type="button">-->
<!--          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">-->
<!--            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />-->
<!--          </svg>-->
<!--        </button>-->
<!--      </div>-->
<!--      &lt;!&ndash; end chat input action &ndash;&gt;-->

<!--      <div class="w-full mx-2">-->
<!--        <input class="w-full rounded-full border border-gray-200" type="text" value="" placeholder="Aa" autofocus  #messageToSend  />-->
<!--      </div>-->

<!--      &lt;!&ndash; chat send action &ndash;&gt;-->

<!--      <div>-->
<!--        <button class="inline-flex hover:bg-indigo-50 rounded-full p-2" type="button" (click)="sendMessage(messageToSend.value)">-->
<!--          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">-->
<!--            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />-->
<!--          </svg>-->
<!--        </button>-->
<!--      </div>-->

<!--      &lt;!&ndash; end chat send action &ndash;&gt;-->
<!--    </div>-->
<!--  </div>-->

<!--  &lt;!&ndash; end chat box &ndash;&gt;-->
<!--</div>-->


    <div class="flex max-w-full flex-1 flex-col">

      <div class="relative h-full w-full transition-width flex flex-col overflow-hidden items-stretch flex-1">
        <div class="flex-1 overflow-hidden">
          <div class=" h-full ">
            <div class="">
<ng-container *ngIf="receivedMessages.length > 0">
                <div class="flex flex-col items-center text-sm ">
                  <div class="flex w-full items-center justify-center gap-1 border-b border-black/10 bg-gray-50 p-3 text-gray-50 ">
                    Model: Model name
                  </div>
              <ng-container *ngFor="let message of receivedMessages" >
                    <div [ngClass]="message.reply ? 'w-full text-gray-800  border-b border-black/10' :
            ' w-full text-gray-800  border-b border-black/10'">
                        <div class="text-base gap-4 md:gap-6 md:max-w-2xl lg:max-w-xl xl:max-w-3xl flex lg:px-0 m-auto w-full">
                          <div class="flex flex-row gap-4 md:gap-6 md:max-w-2xl lg:max-w-xl xl:max-w-3xl p-4 md:py-6 lg:px-0 m-auto w-full">
                            <div class="w-8 flex flex-col relative items-end">
                              <div class="relative h-7 w-7 p-1 rounded-sm text-white flex items-center justify-center bg-black/75 text-opacity-100r">
                               <img *ngIf="!message.reply" class="rounded-full w-10 h-10" src="/static/images/panda-avatar.png" />

                              </div>
                              <div class="text-xs flex items-center justify-center gap-1 absolute left-0 top-2 -ml-4 -translate-x-full group-hover:visible !invisible">
                                <button
                                  disabled
                                  class="text-gray-300 dark:text-gray-400"
                                ></button>
                                <span class="flex-grow flex-shrink-0">1 / 1</span>
                                <button
                                  disabled
                                  class="text-gray-300 dark:text-gray-400"
                                ></button>
                              </div>
                            </div>
                            <div class="relative flex w-[calc(100%-50px)] flex-col gap-1 md:gap-3 lg:w-[calc(100%-115px)]">
                              <div class="flex flex-grow flex-col gap-3">
                                <div class="min-h-20 flex flex-col items-start gap-4 whitespace-pre-wrap break-words">
                                  <div class="markdown prose w-full break-words  ">

                                      <p>{{message.text}}</p>

                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
    </div>
              </ng-container>
                  <div class="w-full h-32 md:h-48 flex-shrink-0"></div>
                </div>
</ng-container>
              <ng-container *ngIf="receivedMessages.length === 0">
                <div class="py-10 relative w-full flex flex-col h-full">
                  <div class="text-2xl sm:text-4xl font-semibold text-center text-gray-200 dark:text-gray-600 flex gap-2 items-center justify-center" style="height: 80vh;">
                    ATLAS Prodsys Chat
                  </div>
                </div>
 </ng-container>
              <div class="flex flex-col items-center text-sm dark:bg-gray-800"></div>
            </div>
          </div>
        </div>
        <div class="absolute bottom-0 left-0 w-full border-t md:border-t-0 dark:border-white/20 md:border-transparent md:dark:border-transparent md:bg-vert-light-gradient bg-white dark:bg-gray-800 md:!bg-transparent dark:md:bg-vert-dark-gradient pt-2">
          <form class="stretch mx-2 flex flex-row gap-3 last:mb-2 md:mx-4 md:last:mb-6 lg:mx-auto lg:max-w-2xl xl:max-w-3xl">
            <div class="relative flex flex-col h-full flex-1 items-stretch md:flex-col">
<!--              {errorMessage ? (-->
<!--                <div className="mb-2 md:mb-0">-->
<!--                  <div className="h-full flex ml-1 md:w-full md:m-auto md:mb-2 gap-0 md:gap-2 justify-center">-->
<!--                    <span className="text-red-500 text-sm">{errorMessage}</span>-->
<!--                  </div>-->
<!--                </div>-->
<!--              ) : null}-->
              <div class="flex flex-col w-full py-2 flex-grow md:py-3 md:pl-4 relative border border-black/10 bg-white dark:border-gray-900/50 dark:text-white dark:bg-gray-700 rounded-md shadow-[0_0_10px_rgba(0,0,0,0.10)] dark:shadow-[0_0_15px_rgba(0,0,0,0.10)]">
                <textarea


                  placeholder="Send a message..."
                  class="m-0 w-full resize-none border-0 bg-transparent p-0 pr-7 focus:ring-0 focus-visible:ring-0 dark:bg-transparent pl-2 md:pl-0"
                  #messageBigChat
                ></textarea>
                <div                   class="absolute p-1 rounded-md bottom-1.5 md:bottom-2.5 bg-transparent disabled:bg-gray-500 right-1 md:right-2 disabled:opacity-40"
                >
        <button class="inline-flex hover:bg-indigo-50 rounded-full p-2" type="button" (click)="sendMessage(messageBigChat.value)">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
        </button>
                  </div>
              </div>
            </div>
          </form>
          <div class="px-3 pt-2 pb-3 text-center text-xs text-black/50 dark:text-white/50 md:px-4 md:pt-3 md:pb-6">
            <span>
              ATLAS Prodsys Chat may produce inaccurate information.
            </span>
          </div>
        </div>
      </div>
    </div>
